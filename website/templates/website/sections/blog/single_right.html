{% load static %}

<section class="blog blog-inner-page">
    <div class="container">
        <div class="row">
            <!-- Left Column Starts-->
            <div class="col-12 col-lg-9 pe-3 pe-lg-5">
                <div class="blog-post-detail">
                    <!-- Post Details Starts -->
                    {% if article %}
                    <div class="pic pb-4 animated" data-animation="fadeInUp" data-animation-delay="300">
                        <img src="{{ article.image_principale.url }}" class="img-fluid" alt="{{ article.titre }}">
                    </div>
                    <h2 class="pt-3 pb-3 animated" data-animation="fadeInUp" data-animation-delay="400">{{ article.titre }}</h2>
                    <p class="animated" data-animation="fadeInUp" data-animation-delay="500">
                        {{ article.contenu_principal|linebreaks }}
                    </p>
                    
                    {% if article.citation %}
                    <blockquote class="blockquote mt-4 mb-4 animated" data-animation="fadeInUp" data-animation-delay="600">
                        <p>{{ article.citation }}</p>
                    </blockquote>
                    {% endif %}
                    
                    <div class="row pt-4 pb-4">
                        {% if article.image_secondaire %}
                        <div class="col-12 col-lg-6 animated" data-animation="fadeInUp" data-animation-delay="100">
                            <div class="pic">
                                <img src="{{ article.image_secondaire.url }}" class="img-fluid" alt="{{ article.titre }}">
                            </div>
                        </div>
                        {% endif %}
                        <div class="col-12 col-lg-6 ps-3 ps-lg-5 pt-4 pt-lg-0 animated" data-animation="fadeInUp" data-animation-delay="200">
                            <h3>{{ article.titre|truncatechars:50 }}</h3>
                            <p>Description compl√©mentaire...</p>
                            {% if article.get_elements_liste %}
                            <ul class="list-group list-group-flush">
                                {% for element in article.get_elements_liste %}
                                <li class="list-group-item">{{ element }}</li>
                                {% endfor %}
                            </ul>
                            {% endif %}
                        </div>
                    </div>
                    
                    <!-- Tags & Share Start -->
                    <div class="row pt-4 pb-4 animated" data-animation="fadeInUp" data-animation-delay="400">
                        <div class="col-12 col-lg-6">
                            <ul class="list-inline">
                                <li class="list-inline-item"><i class="las la-tags pt-2"></i></li>
                                {% for tag in article.get_tags_list %}
                                <li class="list-inline-item"><a href="#">{{ tag }}</a></li>
                                {% endfor %}
                            </ul>
                        </div>
                        <div class="col-12 col-lg-6">
                            <ul class="list-inline">
                                <li class="list-inline-item"><i class="las la-share-alt"></i></li>
                                {% if article.lien_facebook %}
                                <li class="list-inline-item"><a href="{{ article.lien_facebook }}">Facebook</a></li>
                                {% endif %}
                                {% if article.lien_twitter %}
                                <li class="list-inline-item"><a href="{{ article.lien_twitter }}">Twitter</a></li>
                                {% endif %}
                                {% if article.lien_linkedin %}
                                <li class="list-inline-item"><a href="{{ article.lien_linkedin }}">Linkedin</a></li>
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- About Author Starts -->
                    {% if article and article.photo_auteur %}
                    <div class="light-grey-bg p-4 animated" data-animation="fadeInUp" data-animation-delay="100">
                        <div class="row align-items-center">
                            <div class="col-3">
                                <img src="{{ article.photo_auteur.url }}" class="img-fluid" alt="{{ article.nom_auteur }}">
                            </div>
                            <div class="col-9">
                                <h3>About Author</h3>
                                <p>{{ article.nom_auteur }}</p>
                                <ul class="list-inline">
                                    <li class="list-inline-item"><i class="las la-share-alt"></i></li>
                                    <!-- Liens sociaux de l'auteur -->
                                </ul>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Right Column Starts-->
            <div class="col-12 col-lg-3 sidebar pt-5 pt-lg-0">
                <!-- Categories Starts -->
                <div class="categories animated" data-animation="fadeInUp" data-animation-delay="300">
                    <h2>Categories</h2>
                    <ul>
                        {% for categorie in categories_sidebar %}
                        <li class="clearfix">
                            <div class="info">
                                <h2><a href="">{{ categorie.nom }}</a></h2>
                                <h3>{{ categorie.description }}</h3>
                            </div>
                            <div class="posts">[{{ categorie.nombre_articles }}]</div>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                <!-- Categories Ends -->
                
                <!-- Posts Tabs Starts -->
                <div class="posts-tabs animated" data-animation="fadeInUp" data-animation-delay="100">
                    <!-- Nav tabs -->
                    <ul class="nav" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active" id="popular-tab" data-bs-toggle="tab" href="#popular" role="tab" aria-controls="popular" aria-selected="true">Popular</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="recent-tab" data-bs-toggle="tab" href="#recent" role="tab" aria-controls="recent" aria-selected="false">Recent</a>
                        </li>
                    </ul>
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="popular" role="tabpanel" aria-labelledby="popular-tab">
                            <ul>
                                {% for article_pop in articles_populaires %}
                                <li class="clearfix">
                                    <div class="picture">
                                        <img src="{{ article_pop.image.url }}" width="72" height="72" alt="{{ article_pop.titre }}">
                                    </div>
                                    <div class="info">
                                        <div class="caption"><a href="">{{ article_pop.titre|truncatechars:50 }}</a></div>
                                        <div class="date">{{ article_pop.date_publication|date:"M d, Y" }}</div>
                                    </div>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="recent" role="tabpanel" aria-labelledby="recent-tab">
                            <ul>
                                {% for article_rec in articles_recents %}
                                <li class="clearfix">
                                    <div class="picture">
                                        <img src="{{ article_rec.image.url }}" width="72" height="72" alt="{{ article_rec.titre }}">
                                    </div>
                                    <div class="info">
                                        <div class="caption"><a href="">{{ article_rec.titre|truncatechars:50 }}</a></div>
                                        <div class="date">{{ article_rec.date_publication|date:"M d, Y" }}</div>
                                    </div>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- Posts Tabs Ends -->
                
                <!-- Photos Starts -->
                <div class="photos animated" data-animation="fadeInUp" data-animation-delay="200">
                    <h2>Photos</h2>
                    <div class="row popup-gallery">
                        {% for photo in photos_galerie %}
                        <div class="col-4">
                            <a href="{{ photo.image.url }}" title="{{ photo.titre }}">
                                <img src="{{ photo.image.url }}" class="img-fluid" alt="{{ photo.titre }}">
                            </a>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <!-- Photos Ends -->
            </div>
            <!-- Right Column Ends-->
        </div>
    </div>
</section>